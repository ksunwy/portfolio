import Image from 'next/image';
import { useState } from 'react';

const Form = () => {
    const [formData, setFormData] = useState({ name: '', email: '', message: '' });
    const [loading, setLoading] = useState(false);

    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
    };

    const handleSubmit = async (e) => {
        e.preventDefault();
        setLoading(true);

        try {
            const res = await fetch('/api/send-message', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData),
            });

            if (!res.ok) throw new Error('Error');

            alert('Your message has been sent!');
            setFormData({ name: '', email: '', message: '' });
        } catch (error) {
            alert('Failed to send message');
        } finally {
            setLoading(false);
        }
    };
    return (
        <div className='w-[100dvw] h-[70dvh] -mt-[22%] z-50'>
            <svg className='mx-auto mb-10' width="357" height="74" viewBox="0 0 357 74" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.2 22.4C8.86667 22.4 6.13333 21.4333 4 19.5C1.93333 17.5667 0.9 14.9 0.9 11.5C0.9 8.16666 1.83333 5.5 3.7 3.49999C5.63333 1.43333 8.46667 0.399999 12.2 0.399999H55.3C59.0333 0.399999 61.8333 1.43333 63.7 3.49999C65.6333 5.5 66.6 8.16666 66.6 11.5C66.6 14.9 65.5333 17.5667 63.4 19.5C61.3333 21.4333 58.6333 22.4 55.3 22.4C53.0333 22.4 51.2 22.1667 49.8 21.7C48.4667 21.1667 47.3667 20.5667 46.5 19.9C45.6333 19.1667 44.8 18.5667 44 18.1C43.2 17.5667 42.2 17.3 41 17.3L40.1 19.1C40.3667 19.7 40.8333 20.5667 41.5 21.7C42.1667 22.7667 42.8 24.3333 43.4 26.4C44 28.4 44.3 31.1333 44.3 34.6V63.5C44.3 66.2333 43.2667 68.5 41.2 70.3C39.2 72.1 36.7333 73 33.8 73C30.8 73 28.2667 72.1 26.2 70.3C24.2 68.5 23.2 66.2333 23.2 63.5V34.6C23.2 31.1333 23.5 28.4 24.1 26.4C24.7 24.3333 25.3333 22.7667 26 21.7C26.7333 20.5667 27.2333 19.7 27.5 19.1L26.5 17.3C25.3 17.3 24.3 17.5667 23.5 18.1C22.7 18.5667 21.8667 19.1667 21 19.9C20.1333 20.5667 19.0333 21.1667 17.7 21.7C16.3667 22.1667 14.5333 22.4 12.2 22.4ZM52.7883 47C52.7883 41.7333 53.8216 37.1 55.8883 33.1C58.0216 29.1 61.0216 25.9667 64.8883 23.7C68.8216 21.4333 73.4883 20.3 78.8883 20.3C83.0883 20.3 86.8549 21.0667 90.1883 22.6C93.5883 24.1333 96.2549 26.2 98.1883 28.8C100.122 31.3333 101.088 34.1333 101.088 37.2C101.088 40.4 100.155 42.6667 98.2883 44C96.4216 45.3333 93.6549 46 89.9883 46H68.9883C68.9883 47.7333 69.6549 49.1667 70.9883 50.3C72.3883 51.4333 74.7216 52 77.9883 52C79.6549 52 81.1883 51.8333 82.5883 51.5C84.0549 51.1667 85.5216 50.8667 86.9883 50.6C88.5216 50.2667 90.2216 50.1 92.0883 50.1C94.755 50.1 96.955 51.0667 98.6883 53C100.422 54.8667 101.288 57.4667 101.288 60.8C101.288 64.7333 99.2549 67.8 95.1883 70C91.1883 72.2 85.9216 73.3 79.3883 73.3C74.7883 73.3 70.4549 72.4 66.3883 70.6C62.3883 68.8 59.1216 65.9667 56.5883 62.1C54.0549 58.1667 52.7883 53.1333 52.7883 47ZM85.1883 42.7C86.1883 42.7 86.5216 42.2333 86.1883 41.3C85.9216 40.3667 85.1216 39.4 83.7883 38.4C82.4549 37.4 80.5216 36.9 77.9883 36.9C75.0549 36.9 72.8549 37.5333 71.3883 38.8C69.9883 40.0667 69.2883 41.3667 69.2883 42.7H85.1883ZM116.225 73.4C112.358 73.4 109.425 72.3 107.425 70.1C105.492 67.8333 104.525 65.1667 104.525 62.1C104.525 60.1667 105.025 58.1667 106.025 56.1C107.025 54.0333 108.692 52.2667 111.025 50.8C112.358 49.9333 114.058 49.2667 116.125 48.8C118.258 48.2667 120.158 47.8333 121.825 47.5C118.158 46.3667 115.292 45.0333 113.225 43.5C111.158 41.9667 109.458 40.4 108.125 38.8C106.258 36.2667 105.392 33.5333 105.525 30.6C105.725 27.6 107.092 25.0333 109.625 22.9C111.425 21.3667 113.392 20.5667 115.525 20.5C117.725 20.4333 119.825 21 121.825 22.2C123.825 23.4 125.458 25.1667 126.725 27.5C128.192 30.1 129.225 32.3667 129.825 34.3C130.492 36.1667 131.225 37.8667 132.025 39.4C132.892 40.9333 134.258 42.4667 136.125 44C136.925 43.7333 137.625 43.3667 138.225 42.9C138.825 42.4333 139.492 41.5 140.225 40.1C138.558 39.7 137.058 38.7 135.725 37.1C134.392 35.5 133.725 33.2667 133.725 30.4C133.725 27.3333 134.658 24.9 136.525 23.1C138.392 21.2333 141.158 20.3 144.825 20.3C147.825 20.3 150.258 21.3 152.125 23.3C153.992 25.2333 154.925 27.6667 154.925 30.6C154.925 33.7333 154.292 36.2333 153.025 38.1C151.825 39.9 150.192 41.4667 148.125 42.8C147.058 43.6 145.758 44.3 144.225 44.9C142.692 45.4333 141.058 45.9 139.325 46.3C142.058 46.7 144.658 47.4667 147.125 48.6C149.592 49.7333 151.858 51.3667 153.925 53.5C155.458 55.0333 156.492 56.9 157.025 59.1C157.625 61.2333 157.625 63.3667 157.025 65.5C156.492 67.6333 155.325 69.4333 153.525 70.9C151.658 72.3667 149.592 73.1333 147.325 73.2C145.058 73.2667 142.892 72.7333 140.825 71.6C138.825 70.4 137.225 68.7 136.025 66.5C134.825 64.3 133.892 62.1333 133.225 60C132.558 57.8 131.792 55.8 130.925 54C130.125 52.1333 128.925 50.6333 127.325 49.5C126.258 50.1 125.625 50.8333 125.425 51.7C125.225 52.5 125.258 53.4333 125.525 54.5C125.858 55.5 126.192 56.6 126.525 57.8C126.925 58.9333 127.125 60.1333 127.125 61.4C127.125 63.4 126.725 65.3333 125.925 67.2C125.125 69 123.892 70.5 122.225 71.7C120.625 72.8333 118.625 73.4 116.225 73.4ZM187.559 73.3C184.026 73.3 180.826 72.5 177.959 70.9C175.159 69.3 172.959 67.0333 171.359 64.1C169.759 61.1 168.959 57.6 168.959 53.6V36L165.259 36.5C163.259 36.7667 161.493 36.0667 159.959 34.4C158.426 32.7333 157.659 30.6333 157.659 28.1C157.659 25.5667 158.426 23.5 159.959 21.9C161.493 20.2333 163.259 19.5333 165.259 19.8L168.959 20.3L168.859 13.5C168.793 10.8333 169.559 8.73333 171.159 7.19999C172.759 5.6 175.093 4.8 178.159 4.8C181.226 4.8 183.593 5.6 185.259 7.19999C186.926 8.73333 187.693 10.8333 187.559 13.5L187.359 20.3L192.659 19.6C196.259 19.0667 198.993 19.7333 200.859 21.6C202.726 23.4 203.659 25.5667 203.659 28.1C203.659 30.6333 202.726 32.8333 200.859 34.7C199.059 36.5 196.426 37.1667 192.959 36.7L187.359 36V50.9C187.359 51.7667 187.659 52.5667 188.259 53.3C188.859 53.9667 189.593 54.1667 190.459 53.9C191.459 53.6333 192.493 53.0667 193.559 52.2C194.693 51.3333 196.126 50.9 197.859 50.9C200.459 50.9 202.459 51.8333 203.859 53.7C205.259 55.5667 205.959 57.8667 205.959 60.6C205.959 62.7333 205.193 64.8 203.659 66.8C202.193 68.7333 200.093 70.3 197.359 71.5C194.626 72.7 191.359 73.3 187.559 73.3ZM237.784 73C234.784 73 232.384 72.1333 230.584 70.4C228.85 68.6 227.984 66.4 227.984 63.8V30.7C227.984 27.9 228.817 25.5333 230.484 23.6C232.217 21.6667 234.65 20.7 237.784 20.7C240.85 20.7 243.15 21.6667 244.684 23.6C246.217 25.5333 246.984 27.9667 246.984 30.9V35.9H248.784C248.784 30.2333 249.984 26.3 252.384 24.1C254.784 21.8333 257.75 20.7 261.284 20.7C265.817 20.7 269.15 22.1 271.284 24.9C273.417 27.7 274.484 31.3667 274.484 35.9H276.284C276.284 32.1 276.917 29.1 278.184 26.9C279.45 24.7 281.05 23.1333 282.984 22.2C284.984 21.2 287.05 20.7 289.184 20.7C293.517 20.7 296.684 21.7333 298.684 23.8C300.75 25.8667 302.084 28.6333 302.684 32.1C303.284 35.5667 303.584 39.4667 303.584 43.8V63.8C303.584 66.4 302.684 68.6 300.884 70.4C299.15 72.1333 296.817 73 293.884 73C290.95 73 288.584 72.1333 286.784 70.4C284.984 68.6 284.084 66.4 284.084 63.8V46.1C284.084 43.7 283.784 41.8333 283.184 40.5C282.584 39.1667 281.384 38.5 279.584 38.5C277.65 38.5 276.384 39.2333 275.784 40.7C275.25 42.1667 274.984 44.0333 274.984 46.3V63.8C274.984 66.4 274.15 68.6 272.484 70.4C270.817 72.1333 268.517 73 265.584 73C262.584 73 260.184 72.1333 258.384 70.4C256.65 68.6 255.784 66.4 255.784 63.8V46.1C255.784 43.7 255.484 41.8333 254.884 40.5C254.284 39.1667 253.117 38.5 251.384 38.5C249.45 38.5 248.217 39.2333 247.684 40.7C247.217 42.1667 246.984 44.0333 246.984 46.3V63.8C246.984 66.4 246.184 68.6 244.584 70.4C242.984 72.1333 240.717 73 237.784 73ZM308.355 47C308.355 41.7333 309.388 37.1 311.455 33.1C313.588 29.1 316.588 25.9667 320.455 23.7C324.388 21.4333 329.055 20.3 334.455 20.3C338.655 20.3 342.421 21.0667 345.755 22.6C349.155 24.1333 351.821 26.2 353.755 28.8C355.688 31.3333 356.655 34.1333 356.655 37.2C356.655 40.4 355.721 42.6667 353.855 44C351.988 45.3333 349.221 46 345.555 46H324.555C324.555 47.7333 325.221 49.1667 326.555 50.3C327.955 51.4333 330.288 52 333.555 52C335.221 52 336.755 51.8333 338.155 51.5C339.621 51.1667 341.088 50.8667 342.555 50.6C344.088 50.2667 345.788 50.1 347.655 50.1C350.321 50.1 352.521 51.0667 354.255 53C355.988 54.8667 356.855 57.4667 356.855 60.8C356.855 64.7333 354.821 67.8 350.755 70C346.755 72.2 341.488 73.3 334.955 73.3C330.355 73.3 326.021 72.4 321.955 70.6C317.955 68.8 314.688 65.9667 312.155 62.1C309.621 58.1667 308.355 53.1333 308.355 47ZM340.755 42.7C341.755 42.7 342.088 42.2333 341.755 41.3C341.488 40.3667 340.688 39.4 339.355 38.4C338.021 37.4 336.088 36.9 333.555 36.9C330.621 36.9 328.421 37.5333 326.955 38.8C325.555 40.0667 324.855 41.3667 324.855 42.7H340.755Z" fill="#D7E5F9" />
            </svg>

            <form onSubmit={handleSubmit} className="space-y-6 max-w-[50rem] mx-auto">
                <input
                    type="text"
                    name="name"
                    placeholder="Your Name"
                    className="w-full text-[#111E45] p-3 border border-[#D7E5F9] rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#89B0EA]"
                    onChange={handleChange}
                    required
                />
                <input
                    type="text"
                    name="email"
                    placeholder="Your Email/Telegram"
                    className="w-full text-[#111E45] p-3 border border-[#D7E5F9] rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#89B0EA]"
                    onChange={handleChange}
                    required
                />
                <textarea
                    name="message"
                    placeholder="Your message..."
                    className="w-full text-[#111E45] p-3 border border-[#D7E5F9] rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-[#89B0EA] resize-none"
                    rows="4"
                    onChange={handleChange}
                    required
                />
                <button
                    type="submit"
                    className="w-full bg-[#89B0EA] text-[#FFF9EF] text-3xl font-bold px-6 py-4 rounded-lg"
                >
                    {loading ? 'Sending...' : 'Send Message'}
                </button>
            </form>
        </div>
    )
}

export default Form
